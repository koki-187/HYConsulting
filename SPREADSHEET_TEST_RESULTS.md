# スプレッドシート連携テスト結果

## テスト実施日時
2026-01-07

## テストケース
**入力データ:**
- 物件種別: 土地
- 都道府県: 北海道
- 市区町村: 札幌市中央区
- 面積: 200㎡
- 連絡先: 未入力（オプション）

**査定結果:**
- 推定価格範囲: 6,500万円〜8,795万円
- 査定価格: 7,647万円
- 信頼度: 75%
- 使用データ: 207件（1,944取引）

## スプレッドシート確認結果

### ✅ 成功: データが正常に追加されました

**Row 8 (最新エントリ):**
- A列 (受付日時): 2026-01-06T17:*:Anonymous
- B列 (お名前): Anonymous
- C列 (メールアドレス): (空欄)
- D列 (電話番号): (空欄)
- E列 (物件種別): 土地
- F列 (都道府県): 北海道

**確認事項:**
1. ✅ Webhookが正常に動作
2. ✅ 基本情報（物件種別、都道府県）が正しく送信
3. ⚠️ 連絡先未入力時は"Anonymous"として記録
4. ⚠️ 市区町村以降のカラム（G〜M列）が表示されていない

## 問題点

### 1. スプレッドシートのカラム不足
現在のスプレッドシートには6カラム（A〜F）しかありませんが、Webhookは13フィールドを送信しています:

**送信されているが表示されないデータ:**
- G列: city (市区町村) → "札幌市中央区"
- H列: address (所在地)
- I列: floorArea (延床面積) → "200"
- J列: buildingAge (築年数)
- K列: estimatedPrice (推定価格) → "6500万円〜8795万円"
- L列: nearestStation (最寄り駅)
- M列: walkingMinutes (駅徒歩)

### 2. Google Apps Scriptの問題
スプレッドシートのGoogle Apps Scriptが、受信した追加フィールドを無視している可能性があります。

## 推奨対応

### オプションA: スプレッドシートにカラムを追加
1. G列〜M列のヘッダーを手動で追加
2. Google Apps Scriptを更新して全フィールドを処理

### オプションB: Webhook送信データを削減
1. routers.tsのWebhook送信を基本情報のみに制限
2. スプレッドシートの現在の構造に合わせる

## 次のステップ
1. Google Apps Scriptのコードを確認
2. 全フィールドを受け取れるようにスクリプトを更新
3. スプレッドシートにカラムを追加
4. 再テストを実施
