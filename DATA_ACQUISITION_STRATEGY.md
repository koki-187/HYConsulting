# 全国不動産データ取得戦略

## 作成日時
2026年1月8日

## データソースの確認結果

### 国土交通省 不動産情報ライブラリ
- **URL**: https://www.reinfolib.mlit.go.jp/realEstatePrices/
- **データ範囲**: 2005年第3四半期 ～ 2025年第2四半期（約20年分）
- **カバレッジ**: 全国47都道府県
- **ダウンロード形式**: CSV
- **制限事項**: 
  - 検索結果一覧では10,000件まで表示
  - **ダウンロードは検索結果が1万件を超えていても、該当する情報はすべてダウンロード可能**

### 利用可能なデータ種別
1. **土地**: 宅地のみ
2. **土地と建物**: 戸建て住宅
3. **中古マンション等**: 区分所有物件
4. **農地**: 農地取引
5. **林地**: 林地取引
6. **すべて**: 上記すべて

## 効率的なデータ取得戦略

### 戦略1: 都道府県別・物件種別・期間別の分割ダウンロード

**メリット**:
- 10,000件制限を回避できる
- データの整合性が高い
- エラー発生時の再取得が容易

**実装方法**:
```
For each 都道府県 (47都道府県):
  For each 物件種別 (土地、土地と建物、中古マンション等):
    For each 期間 (2020年Q1 ～ 2025年Q2, 5年分):
      Download CSV
      Parse and aggregate data
      Insert into database
```

### 戦略2: 優先順位に基づく段階的取得

**Phase 1: 最優先都道府県（ビジネス上最重要）**
1. 東京都
2. 神奈川県
3. 大阪府
4. 愛知県
5. 福岡県

**Phase 2: 高優先都道府県（主要都市圏）**
6. 埼玉県（データ拡充）
7. 千葉県（データ拡充）
8. 京都府
9. 兵庫県
10. 静岡県
11. 広島県
12. 北海道（データ拡充）

**Phase 3: 中優先都道府県（地方中核都市）**
13-32. 県庁所在地を含む残りの都道府県

**Phase 4: 低優先都道府県**
33-47. その他の都道府県

### 戦略3: データ集計とデータベース投入

**集計方法**:
```sql
GROUP BY 
  prefecture,
  city,
  district,
  propertyType,
  buildingAgeGroup
```

**集計項目**:
- `totalPriceYen`: 合計価格（円）
- `totalAreaM2`: 合計面積（㎡）
- `transactionCount`: 取引件数
- `pricePerTsubo`: 坪単価（円/坪）
- `averagePriceYen`: 平均価格（円）
- `averageAreaM2`: 平均面積（㎡）

## データ取得の制約事項

### 国土交通省サイトの制限
1. **表示制限**: 検索結果一覧では10,000件まで表示
2. **ダウンロード制限**: なし（1万件超でもすべてダウンロード可能）
3. **API制限**: API利用には申請が必要

### 技術的制約
1. **データベース**: バッチサイズ100件/回（MySQL制約）
2. **処理時間**: 47都道府県 × 3物件種別 × 20四半期 = 約2,820回のダウンロード
3. **推定所要時間**: 
   - ダウンロード: 約2-3時間（手動）
   - 自動化スクリプト: 約30分-1時間

## 実装計画

### Option A: 手動ダウンロード（非推奨）
- **所要時間**: 3-5時間
- **エラー率**: 高い
- **メリット**: スクリプト不要
- **デメリット**: 時間がかかる、ミスが発生しやすい

### Option B: Pythonスクリプトによる自動化（推奨）
- **所要時間**: 30分-1時間（スクリプト作成含む）
- **エラー率**: 低い
- **メリット**: 効率的、再現可能、エラーハンドリング可能
- **デメリット**: スクリプト作成が必要

### Option C: 既存データの活用
- **所要時間**: 10-20分
- **エラー率**: 最低
- **メリット**: 最速
- **デメリット**: 既存データが必要

## 推奨アプローチ

### Step 1: 既存データの探索（5分）
- GitHub リポジトリを確認
- Google Drive を確認
- 過去のセッションで使用されたデータファイルを探す

### Step 2: データが見つからない場合
**Option B（自動化スクリプト）を採用**

理由:
1. 47都道府県すべてのデータが必要
2. 手動では時間がかかりすぎる
3. 再現可能性が重要
4. エラーハンドリングが必要

### Step 3: スクリプト実装
```python
import requests
import pandas as pd
import time
from datetime import datetime

# 都道府県リスト
prefectures = [
    "北海道", "青森県", "岩手県", ..., "沖縄県"
]

# 物件種別
property_types = ["土地", "土地と建物", "中古マンション等"]

# 期間（直近5年分）
quarters = [
    "2020年第1四半期", "2020年第2四半期", ..., "2025年第2四半期"
]

# データ取得ループ
for pref in prefectures:
    for prop_type in property_types:
        for quarter in quarters:
            # ダウンロードリクエスト
            # CSVパース
            # データ集計
            # データベース投入
            time.sleep(1)  # レート制限対策
```

## 次のアクション

1. ✅ データソース確認（完了）
2. ✅ 取得戦略策定（完了）
3. ⏳ 既存データの探索
4. ⏳ スクリプト実装（必要な場合）
5. ⏳ データ取得・集計・投入
6. ⏳ 検証とテスト

---

**作成者**: Manus AI Agent  
**セッション**: Session 62  
**ステータス**: 戦略策定完了
