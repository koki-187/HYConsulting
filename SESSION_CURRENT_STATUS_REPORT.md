# 全国不動産データベース構築 - 現状把握レポート

## 作成日時
2026年1月8日 21:48 JST

## 過去の構築状況の完全把握

### 1. データベースの現状

**現在のデータベース統計**:
- 総レコード数: 84,101件
- 登録都道府県数: 15 / 47
- 総取引件数: 635,227件
- **未登録都道府県: 32都府県**

**登録済み都道府県**:
1. 北海道 - 14,912件
2. 埼玉県 - 9,648件
3. 千葉県 - 7,904件
4. 茨城県 - 7,500件
5. 福島県 - 5,652件
6. 愛知県 - 5,000件
7. 栃木県 - 4,908件
8. 宮城県 - 4,788件
9. 群馬県 - 4,508件
10. 福岡県 - 4,000件
11. 山形県 - 3,600件
12. 青森県 - 3,496件
13. 秋田県 - 3,176件
14. 岩手県 - 3,008件
15. 神奈川県 - 2,001件

**重大な問題点**:
- ❌ **東京都**: データなし（過去に12,493件投入されたが消失）
- ❌ **大阪府**: データなし（過去に12,511件投入されたが消失）
- ⚠️ **神奈川県**: 2,001件のみ（過去12,430件から約80%減少）
- ⚠️ **愛知県**: 5,000件のみ（過去12,607件から約60%減少）
- ⚠️ **福岡県**: 4,000件のみ（過去12,590件から約68%減少）

### 2. 利用可能なデータソース

#### 2.1 既存のCSVファイル
**ファイル**: `/home/ubuntu/hy-consulting-lp/server/mlit-production-data.csv`
- サイズ: 18MB
- 行数: 100,001行（ヘッダー含む）
- 内容: **テストデータ**（パフォーマンステスト用に生成されたデータ）
- 都道府県分布: 19都道府県（各約5,000件）
  - 愛知県: 5,420件
  - 大阪府: 5,341件
  - 兵庫県: 5,323件
  - 新潟県: 5,308件
  - 北海道: 5,308件
  - その他14都道府県
- 物件種別分布:
  - マンション: 33,454件
  - 土地: 33,310件
  - 一戸建て: 33,236件
- **注意**: これは本番データではなく、生成されたテストデータ（remarksに"Generated for performance testing"と記載）

#### 2.2 過去に使用されていたデータファイル
**ファイル**: `/home/ubuntu/upload/realEstateDataByType_FINAL.json`
- 状態: **存在しない**
- 過去の記録: 86.9MB、353,102件の集計データ
- 内容: 全国47都道府県の集計済みデータ

#### 2.3 GitHubリポジトリ
**HYConsulting リポジトリ**:
- `/home/ubuntu/HYConsulting/server/mlit-production-data.csv`
- 内容: プロジェクト内と同じテストデータ（18MB、100,001行）

**My-Agent-Analitics-genspark リポジトリ**:
- 不動産データファイルなし

### 3. データ取得戦略

#### 3.1 国土交通省 不動産情報ライブラリ
- **URL**: https://www.reinfolib.mlit.go.jp/realEstatePrices/
- **データ範囲**: 2005年第3四半期 ～ 2025年第2四半期（約20年分）
- **カバレッジ**: 全国47都道府県
- **ダウンロード形式**: CSV
- **制限事項**: 
  - 検索結果一覧では10,000件まで表示
  - ダウンロードは検索結果が1万件を超えていても全件可能

#### 3.2 採用すべき戦略
**戦略: 手動ダウンロード + 自動集計**

理由:
1. API申請には時間がかかる（3-7日）
2. 手動ダウンロードは今すぐ開始可能
3. 集計スクリプトは準備済み（`/home/ubuntu/hy-consulting-lp/scripts/download-mlit-data.py`）

### 4. 準備済みのツール

#### 4.1 集計スクリプト
**ファイル**: `/home/ubuntu/hy-consulting-lp/scripts/download-mlit-data.py`
- サイズ: 12KB
- 実行権限: あり
- 機能:
  - CSVファイルの読み込み
  - 都道府県・市区町村・地区・物件種別・築年数グループ別の集計
  - 坪単価・平均価格・平均面積の計算
  - データベースへのバッチ投入（100件/回）
  - 重複データの自動マージ

#### 4.2 データ配置ディレクトリ
**ディレクトリ**: `/home/ubuntu/hy-consulting-lp/mlit-data/`
- 状態: 存在（空）
- 用途: ダウンロードしたCSVファイルを配置

### 5. データベーススキーマ

```sql
aggregated_real_estate_data (
  id INT PRIMARY KEY AUTO_INCREMENT,
  propertyType VARCHAR(50),           -- "マンション", "一戸建て", "土地"
  prefecture VARCHAR(50),             -- "東京都", "神奈川県", etc.
  city VARCHAR(100),                  -- "港区", "横浜市", etc.
  district VARCHAR(100),              -- "赤坂", "戸塚区", etc.
  buildingAgeGroup VARCHAR(50),       -- "0～5年", "5～10年", etc.
  totalPriceYen DECIMAL(20, 2),       -- 合計価格（円）
  totalAreaM2 DECIMAL(15, 2),         -- 合計面積（㎡）
  transactionCount INT,               -- 取引件数
  pricePerTsubo INT,                  -- 坪単価（円/坪）
  averagePriceYen INT,                -- 平均価格（円）
  averageAreaM2 DECIMAL(10, 2),       -- 平均面積（㎡）
  datasetVersionId VARCHAR(100),      -- データセットバージョンID
  createdAt TIMESTAMP                 -- 作成日時
)
```

## 不足している内容

### 1. データの不足
- **未登録都道府県**: 32都府県（全47都道府県中）
- **データ消失**: 東京都、大阪府の全データ
- **データ減少**: 神奈川県、愛知県、福岡県の大幅なデータ減少

### 2. 実データの不在
- 現在利用可能なCSVファイルはテストデータのみ
- 本番データ（realEstateDataByType_FINAL.json）は存在しない

### 3. 必要なアクション
1. 全国47都道府県のデータをダウンロード
2. 集計スクリプトでデータを処理
3. データベースに投入
4. 検証とテスト

## 次のステップ

### Phase 1: 最優先都道府県（ビジネス上最重要）
1. 東京都 ❌
2. 神奈川県 ⚠️（データ拡充必要）
3. 大阪府 ❌
4. 愛知県 ⚠️（データ拡充必要）
5. 福岡県 ⚠️（データ拡充必要）

### Phase 2: 高優先都道府県（主要都市圏）
6. 埼玉県 ✅（データ拡充推奨）
7. 千葉県 ✅（データ拡充推奨）
8. 京都府 ❌
9. 兵庫県 ❌
10. 静岡県 ❌
11. 広島県 ❌
12. 北海道 ✅（データ拡充推奨）

### Phase 3: 中優先都道府県（地方中核都市）
13-32. 県庁所在地を含む残りの都道府県

### Phase 4: 低優先都道府県
33-47. その他の都道府県

## 推定所要時間

### 手動ダウンロード方式
- **Phase 1（5都府県）**: 約30分
- **Phase 2（7都道府県）**: 約40分
- **Phase 3（20都道府県）**: 約2時間
- **Phase 4（15都道府県）**: 約1.5時間
- **集計・投入**: 各フェーズ後に20-30分
- **合計**: 約5-6時間

### 効率化のヒント
1. 複数のブラウザタブで並行ダウンロード
2. ダウンロード完了後、まとめて集計スクリプトを実行
3. 都道府県ごとに検証せず、全件完了後に一括検証

## 成功指標

### Phase 1完了時の目標
| 指標 | 現在 | 目標 | 達成条件 |
|------|------|------|---------|
| 登録都道府県数 | 15 | 20+ | Phase 1の5都府県が追加 |
| 総レコード数 | 84,101 | 150,000+ | 約65,000件以上増加 |
| 東京都レコード数 | 0 | 10,000+ | 東京都データ投入完了 |
| 大阪府レコード数 | 0 | 10,000+ | 大阪府データ投入完了 |

### 全体完了時の目標
| 指標 | 現在 | 目標 | 達成条件 |
|------|------|------|---------|
| 登録都道府県数 | 15 | 47 | 全都道府県登録完了 |
| 総レコード数 | 84,101 | 300,000+ | 全国データ投入完了 |
| 総取引件数 | 635,227 | 2,000,000+ | 全国取引データ反映 |

## 関連ドキュメント

1. **DATABASE_RECONSTRUCTION_SESSION62.md**: 現状分析と問題点
2. **DATA_ACQUISITION_STRATEGY.md**: データ取得戦略
3. **SESSION62_HANDOFF_TO_SESSION63.md**: Session 62からの引き継ぎ
4. **DATABASE_INTEGRATION_SUMMARY.md**: データベース統合サマリー
5. **API_BASED_DATA_ACQUISITION.md**: API情報と代替戦略
6. **MANUAL_DATA_DOWNLOAD_GUIDE.md**: 手動ダウンロード手順書

---

**作成者**: Manus AI Agent  
**セッション**: Current Session  
**ステータス**: 現状把握完了、データダウンロード準備中
