# 全国不動産データ取得計画

## 作成日時
2026年1月8日 21:50 JST

## 不足データの特定

### 1. 未登録都道府県（32都府県）

#### 関東圏（2都県）
1. ❌ **東京都** - 最優先
2. ❌ 山梨県

#### 関西圏（6府県）
3. ❌ **大阪府** - 最優先
4. ❌ 京都府 - 高優先
5. ❌ 兵庫県 - 高優先
6. ❌ 奈良県
7. ❌ 和歌山県
8. ❌ 滋賀県

#### 中部圏（8県）
9. ❌ 新潟県
10. ❌ 富山県
11. ❌ 石川県
12. ❌ 福井県
13. ❌ 長野県
14. ❌ 岐阜県
15. ❌ **静岡県** - 高優先
16. ❌ 三重県

#### 中国圏（5県）
17. ❌ 鳥取県
18. ❌ 島根県
19. ❌ 岡山県
20. ❌ **広島県** - 高優先
21. ❌ 山口県

#### 四国圏（4県）
22. ❌ 徳島県
23. ❌ 香川県
24. ❌ 愛媛県
25. ❌ 高知県

#### 九州・沖縄圏（7県）
26. ❌ 佐賀県
27. ❌ 長崎県
28. ❌ 熊本県
29. ❌ 大分県
30. ❌ 宮崎県
31. ❌ 鹿児島県
32. ❌ 沖縄県

### 2. データ拡充が必要な都道府県（5都県）

1. ⚠️ **神奈川県** - 現在2,001件（目標: 12,000件以上）
2. ⚠️ **愛知県** - 現在5,000件（目標: 12,000件以上）
3. ⚠️ **福岡県** - 現在4,000件（目標: 12,000件以上）
4. ⚠️ 埼玉県 - 現在9,648件（目標: 12,000件以上）
5. ⚠️ 千葉県 - 現在7,904件（目標: 12,000件以上）

### 3. データ拡充推奨の都道府県（10道県）

6. ⚠️ 北海道 - 現在14,912件（十分だが最新データで更新推奨）
7. ⚠️ 茨城県 - 現在7,500件
8. ⚠️ 福島県 - 現在5,652件
9. ⚠️ 栃木県 - 現在4,908件
10. ⚠️ 宮城県 - 現在4,788件
11. ⚠️ 群馬県 - 現在4,508件
12. ⚠️ 山形県 - 現在3,600件
13. ⚠️ 青森県 - 現在3,496件
14. ⚠️ 秋田県 - 現在3,176件
15. ⚠️ 岩手県 - 現在3,008件

## データ取得計画

### Phase 1: 最優先都道府県（5都府県）

**対象**:
1. 東京都 ❌
2. 神奈川県 ⚠️
3. 大阪府 ❌
4. 愛知県 ⚠️
5. 福岡県 ⚠️

**優先理由**:
- ビジネス上最重要
- 人口密集地域
- 不動産取引件数が多い
- ユーザーからの査定依頼が多いと予想される

**推定所要時間**: 30-40分
**期待されるデータ増加**: 約65,000件

### Phase 2: 高優先都道府県（7都道府県）

**対象**:
6. 北海道 ⚠️
7. 埼玉県 ⚠️
8. 千葉県 ⚠️
9. 京都府 ❌
10. 兵庫県 ❌
11. 静岡県 ❌
12. 広島県 ❌

**優先理由**:
- 主要都市圏
- 県庁所在地の人口が多い
- 不動産市場が活発

**推定所要時間**: 40-50分
**期待されるデータ増加**: 約70,000件

### Phase 3: 中優先都道府県（20県）

**対象**:
13. 新潟県 ❌
14. 富山県 ❌
15. 石川県 ❌
16. 福井県 ❌
17. 長野県 ❌
18. 岐阜県 ❌
19. 三重県 ❌
20. 滋賀県 ❌
21. 奈良県 ❌
22. 和歌山県 ❌
23. 岡山県 ❌
24. 山口県 ❌
25. 徳島県 ❌
26. 香川県 ❌
27. 愛媛県 ❌
28. 高知県 ❌
29. 佐賀県 ❌
30. 長崎県 ❌
31. 熊本県 ❌
32. 大分県 ❌

**優先理由**:
- 地方中核都市
- 一定の不動産取引がある

**推定所要時間**: 1.5-2時間
**期待されるデータ増加**: 約100,000件

### Phase 4: 低優先都道府県（15道県）

**対象**:
33. 茨城県 ⚠️
34. 福島県 ⚠️
35. 栃木県 ⚠️
36. 宮城県 ⚠️
37. 群馬県 ⚠️
38. 山形県 ⚠️
39. 青森県 ⚠️
40. 秋田県 ⚠️
41. 岩手県 ⚠️
42. 山梨県 ❌
43. 鳥取県 ❌
44. 島根県 ❌
45. 宮崎県 ❌
46. 鹿児島県 ❌
47. 沖縄県 ❌

**優先理由**:
- データ拡充
- 全国カバレッジの完成

**推定所要時間**: 1-1.5時間
**期待されるデータ増加**: 約65,000件

## データ取得方法

### 手順

#### Step 1: ブラウザで国土交通省サイトにアクセス
URL: https://www.reinfolib.mlit.go.jp/realEstatePrices/

#### Step 2: 検索条件を設定

**基本設定**:
- **地域**: 住所からの場合
- **都道府県**: [対象都道府県]
- **市区町村**: すべて選択
- **地区**: すべて選択

**価格情報区分**:
- ✅ 不動産取引価格情報
- ✅ 成約価格情報

**種類**:
- ✅ すべて

**時期**:
- 開始: 2020年第1四半期
- 終了: 2025年第2四半期
- **理由**: 直近5年分のデータで十分な精度が得られる

#### Step 3: ダウンロード

1. 「検索」ボタンをクリック
2. 検索結果が表示される（10,000件まで表示）
3. 「ダウンロード」ボタンをクリック
4. CSVファイルがダウンロードされる（全件ダウンロード可能）

#### Step 4: ファイルのリネームと配置

**ファイル名規則**:
```
[都道府県名]_すべて_2020Q1-2025Q2.csv
```

**例**:
- 東京都_すべて_2020Q1-2025Q2.csv
- 神奈川県_すべて_2020Q1-2025Q2.csv
- 大阪府_すべて_2020Q1-2025Q2.csv

**配置先**:
```
/home/ubuntu/hy-consulting-lp/mlit-data/
```

#### Step 5: 集計スクリプトの実行

```bash
cd /home/ubuntu/hy-consulting-lp
python3 scripts/download-mlit-data.py --csv-dir ./mlit-data
```

**スクリプトの動作**:
1. mlit-dataディレクトリ内のすべてのCSVファイルを読み込み
2. 都道府県・市区町村・地区・物件種別・築年数グループ別に集計
3. 坪単価・平均価格・平均面積を計算
4. データベースに100件ずつバッチ投入
5. 既存データとの重複は自動マージ

#### Step 6: 検証

```bash
cd /home/ubuntu/hy-consulting-lp
node -e "
const mysql = require('mysql2/promise');
const dotenv = require('dotenv');
dotenv.config();

(async () => {
  const conn = await mysql.createConnection(process.env.DATABASE_URL);
  
  const [rows] = await conn.query(\`
    SELECT prefecture, COUNT(*) as record_count, SUM(transactionCount) as tx_count
    FROM aggregated_real_estate_data
    GROUP BY prefecture
    ORDER BY record_count DESC
  \`);
  
  console.log('=== 都道府県別レコード数 ===');
  console.table(rows);
  
  const [summary] = await conn.query(\`
    SELECT 
      COUNT(*) as total_records,
      COUNT(DISTINCT prefecture) as prefecture_count,
      SUM(transactionCount) as total_transactions
    FROM aggregated_real_estate_data
  \`);
  
  console.log('\\n=== 総計 ===');
  console.table(summary);
  
  await conn.end();
})();
"
```

## 効率化戦略

### 1. 並行ダウンロード
- 複数のブラウザタブを開く
- 各タブで異なる都道府県のダウンロードを並行実行
- 推奨: 3-5タブ同時

### 2. バッチ処理
- Phase 1の5都府県をまとめてダウンロード
- ダウンロード完了後、一括で集計スクリプトを実行
- 検証も各Phaseごとに実施

### 3. 自動化
- ダウンロード後のファイル名変更を自動化（シェルスクリプト）
- 集計スクリプトの実行を自動化（cronやwatchdog）

### 4. エラーハンドリング
- ダウンロード失敗時は再試行
- 集計スクリプトのエラーは詳細ログを確認
- データベース投入エラーは該当データをスキップして続行

## 推定所要時間

| Phase | 対象数 | ダウンロード | 集計・投入 | 検証 | 合計 |
|-------|--------|------------|-----------|------|------|
| Phase 1 | 5都府県 | 30分 | 20分 | 5分 | 55分 |
| Phase 2 | 7都道府県 | 40分 | 25分 | 5分 | 1時間10分 |
| Phase 3 | 20県 | 1.5時間 | 40分 | 10分 | 2時間20分 |
| Phase 4 | 15道県 | 1時間 | 30分 | 10分 | 1時間40分 |
| **合計** | **47都道府県** | **3時間40分** | **1時間55分** | **30分** | **6時間5分** |

**効率化後の推定時間**: 4-5時間

## 成功指標

### Phase 1完了時
- ✅ 登録都道府県数: 20+
- ✅ 総レコード数: 150,000+
- ✅ 東京都レコード数: 10,000+
- ✅ 大阪府レコード数: 10,000+

### Phase 2完了時
- ✅ 登録都道府県数: 27+
- ✅ 総レコード数: 220,000+

### Phase 3完了時
- ✅ 登録都道府県数: 47
- ✅ 総レコード数: 320,000+

### Phase 4完了時
- ✅ 登録都道府県数: 47（データ拡充完了）
- ✅ 総レコード数: 350,000+
- ✅ 総取引件数: 2,500,000+

## 次のアクション

1. ✅ 不足データの特定（完了）
2. ✅ 取得計画の策定（完了）
3. ⏳ Phase 1のデータダウンロード開始
4. ⏳ 集計スクリプトの実行
5. ⏳ データベース投入
6. ⏳ 検証とテスト
7. ⏳ Phase 2-4の実行
8. ⏳ 最終検証
9. ⏳ 次チャットへの引き継ぎ

---

**作成者**: Manus AI Agent  
**セッション**: Current Session  
**ステータス**: 計画策定完了、実行準備完了
